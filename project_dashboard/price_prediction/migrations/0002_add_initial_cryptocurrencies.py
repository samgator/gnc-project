# Generated by Django 5.2.2 on 2025-06-16 05:17

from django.db import migrations

def add_initial_cryptocurrencies(apps, schema_editor):
    Cryptocurrency = apps.get_model('price_prediction', 'Cryptocurrency')
    
    # Create initial cryptocurrency records
    cryptocurrencies = [
        {
            'symbol': 'BTC',
            'name': 'Bitcoin',
            'current_price': 0,  # Will be updated when first accessed
        },
        {
            'symbol': 'ETH',
            'name': 'Ethereum',
            'current_price': 0,  # Will be updated when first accessed
        },
        {
            'symbol': 'BNB',
            'name': 'Binance Coin',
            'current_price': 0,  # Will be updated when first accessed
        },
    ]
    
    for crypto in cryptocurrencies:
        Cryptocurrency.objects.get_or_create(
            symbol=crypto['symbol'],
            defaults={
                'name': crypto['name'],
                'current_price': crypto['current_price'],
            }
        )

def remove_initial_cryptocurrencies(apps, schema_editor):
    Cryptocurrency = apps.get_model('price_prediction', 'Cryptocurrency')
    Cryptocurrency.objects.filter(symbol__in=['BTC', 'ETH', 'BNB']).delete()

class Migration(migrations.Migration):
    dependencies = [
        ('price_prediction', '0001_initial'),
    ]

    operations = [
        migrations.RunPython(
            add_initial_cryptocurrencies,
            remove_initial_cryptocurrencies
        ),
    ]
